@inherits LayoutComponentBase

@inject NavigationManager NavigationManager

<div class="page">
 @*    <div class="sidebar">
        <NavMenu />
    </div> *@

    <main>
        <div class="top-row">
            <nav class="navbar navbar-light bg-light navbar-expand">
                <div class="container-fluid">
<a class="navbar-brand" href="#">
                    <img src="/Images/Brand/Icon.png" width="30" height="30" class="d-inline-block align-top" alt="Brand Logo" />
                </a>

                <ul class="navbar-nav d-flex flex-row ms-auto align-items-center">
                    <li class="nav-item me-3">
                        <NavLink class="nav-link" href="/" Match="NavLinkMatch.All">Map</NavLink>
                    </li>
                    <li class="nav-item me-3">
                        <NavLink class="nav-link" href="/search">Details</NavLink>
                    </li>

                    <AuthorizeView>
                        <Authorized>
                            <li class="nav-item me-3">
                                <NavLink class="nav-link" href="/account/account-information">@context.User.Identity?.Name</NavLink>
                            </li>

                            @* AntiforgeryToken typically goes in forms, not nav, so consider removing or moving *@
                            @* <AntiforgeryToken /> *@

                            <li class="nav-item me-3">
                                    <NavLink class="nav-link" href="/Account/Login">
                                    <span class="bi bi-box-arrow-right" aria-hidden="true"></span> Logout
                                </NavLink>
                            </li>
                        </Authorized>
                        <NotAuthorized>
                            <li class="nav-item me-3">
                                <NavLink class="nav-link" href="/Account/Register">
                                    <span class="bi bi-person-plus" aria-hidden="true"></span> Register
                                </NavLink>
                            </li>
                            <li class="nav-item me-3">
                                <NavLink class="nav-link" href="/Account/Login">
                                    <span class="bi bi-box-arrow-in-right" aria-hidden="true"></span> Login
                                </NavLink>
                            </li>
                        </NotAuthorized>
                    </AuthorizeView>
                </ul>
                </div>
            </nav>
        </div>

        <div>
            @Body
        </div>
    </main>
</div>

<div id="blazor-error-ui" data-nosnippet>
    An unhandled error has occurred.
    <a href="." class="reload">Reload</a>
    <span class="dismiss">🗙</span>
</div>

<style>
    .nav-link.active {
        background-color: #e9ecef; 
        color: #0d6efd !important; 
        border-radius: 0.25rem;
        font-weight: bold;
        padding: 0.5rem 1rem;
    }
</style>

@code {
    private string currentUrl;
    protected override void OnInitialized()
    {
        currentUrl = NavigationManager.Uri;
    }
    protected override void OnAfterRender(bool firstRender)
    {
    }
}
